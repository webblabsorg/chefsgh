╔══════════════════════════════════════════════════════════════════════════════╗
║                                                                              ║
║              GHANA CHEF ASSOCIATION - ADMIN LOGIN QUICK FIX                  ║
║                                                                              ║
╚══════════════════════════════════════════════════════════════════════════════╝

┌──────────────────────────────────────────────────────────────────────────────┐
│ STEP 1: TEST IF SERVER IS RUNNING                                           │
└──────────────────────────────────────────────────────────────────────────────┘

Visit this URL: https://chefsghana.com/api/health

✓ Shows {"status":"ok"}        → Server is running! Go to STEP 2
✗ Shows 404 or error           → Server NOT running! Go to STEP 1B

┌──────────────────────────────────────────────────────────────────────────────┐
│ STEP 1B: START THE SERVER                                                   │
└──────────────────────────────────────────────────────────────────────────────┘

METHOD 1: DirectAdmin Node.js Selector (EASIEST)
  1. Log in to DirectAdmin
  2. Look for "Node.js Selector" in menu
  3. Click "Create Application"
  4. Set: App Root = "api"
  5. Set: Startup File = "server/index.js"
  6. Add environment variables from .env
  7. Click "Start"
  
METHOD 2: SSH + PM2 (IF YOU HAVE TERMINAL ACCESS)
  $ cd ~/domains/chefsghana.com/public_html
  $ npm install
  $ npm install -g pm2
  $ npm run pm2:start
  $ pm2 save
  
METHOD 3: Contact Hosting Provider
  Call/email support: "Please help me run a Node.js app on port 4000"
  
METHOD 4: Use Different Host for API (RECOMMENDED IF HOSTING DOESN'T SUPPORT)
  - Sign up at Render.com (free)
  - Deploy API there
  - Update frontend VITE_API_BASE_URL

┌──────────────────────────────────────────────────────────────────────────────┐
│ STEP 2: FIX ADMIN LOGIN                                                     │
└──────────────────────────────────────────────────────────────────────────────┘

Try logging in:
  URL: https://chefsghana.com/admin
  Email: admin@chefsghana.com
  Password: your-admin-password (or check ADMIN_SEED_PASSWORD in .env)

IF LOGIN FAILS:

Option A: Use "Forgot Password"
  1. Click "Forgot Password" on login page
  2. Enter: admin@chefsghana.com
  3. Check email for reset link
  4. Set new password
  
Option B: Create Admin User Manually
  1. Open phpMyAdmin in DirectAdmin
  2. Select database: chefs_db
  3. Run this SQL:
  
     INSERT INTO admin_users (
       id, username, email, password_hash, full_name, role, is_active, 
       created_at, updated_at
     ) VALUES (
       UUID(), 'admin', 'admin@chefsghana.com',
       '$2a$10$rZ9QXJ1h.VZxG3FZFvJJUO5YVZ5yX3R0RZ3VzJJUO5YVZ5yX3R0RZ',
       'Administrator', 'admin', 1, NOW(), NOW()
     );
  
  4. Password is now: your-admin-password

┌──────────────────────────────────────────────────────────────────────────────┐
│ VERIFICATION CHECKLIST                                                       │
└──────────────────────────────────────────────────────────────────────────────┘

□ https://chefsghana.com/api/health returns {"status":"ok"}
□ https://chefsghana.com loads registration form
□ https://chefsghana.com/admin loads login page
□ Admin login works with credentials
□ Dashboard displays with KPIs and charts
□ All menu items work (Users, Registrations, Payments, etc.)

┌──────────────────────────────────────────────────────────────────────────────┐
│ COMMON ERRORS & QUICK FIXES                                                 │
└──────────────────────────────────────────────────────────────────────────────┘

ERROR: 404 on /api/health
FIX: Node.js server isn't running. Start it (see STEP 1B above)

ERROR: Invalid credentials
FIX: Check password in .env or use "Forgot Password"

ERROR: Cannot connect to database
FIX: Verify MYSQL_* variables in .env match phpMyAdmin credentials

ERROR: CORS error in browser console
FIX: Ensure CLIENT_ORIGIN in .env matches your domain exactly

ERROR: Charts don't show on dashboard
FIX: Test https://chefsghana.com/api/admin/stats - should return JSON

┌──────────────────────────────────────────────────────────────────────────────┐
│ DOCUMENTATION FILES                                                          │
└──────────────────────────────────────────────────────────────────────────────┘

START HERE:
  📄 README_DEPLOYMENT.md         - Quick start and overview
  
TROUBLESHOOTING:
  📄 URGENT_FIX_ADMIN_LOGIN.md    - Step-by-step admin login fix
  
SETUP GUIDES:
  📄 DIRECTADMIN_NODE_SETUP.md    - Complete Node.js setup (all methods)
  📄 DEPLOYMENT_CHECKLIST.md      - Full deployment checklist
  
TOOLS:
  📄 check-deployment.sh          - Run on server to diagnose issues
  📄 start-server.bat             - Start server on Windows
  📄 ecosystem.config.cjs         - PM2 configuration

┌──────────────────────────────────────────────────────────────────────────────┐
│ CREDENTIALS                                                                  │
└──────────────────────────────────────────────────────────────────────────────┘

ADMIN LOGIN:
  URL: https://chefsghana.com/admin
  Email: admin@chefsghana.com
  Password: your-admin-password (default, check .env file on server)

IMPORTANT FILES ON SERVER:
  .env                 - All credentials and configuration
  api/server/index.js  - Main server file
  dist/                - Frontend files
  database.sql         - Database schema

DATABASE (phpMyAdmin):
  Database: chefs_db
  Tables: admin_users, registrations, payments, membership_types, etc.

┌──────────────────────────────────────────────────────────────────────────────┐
│ EMERGENCY CONTACTS                                                           │
└──────────────────────────────────────────────────────────────────────────────┘

Your Hosting Provider:
  Contact them if Node.js won't start or you need help with server setup

DirectAdmin Support:
  Can help with Node.js Selector, SSH access, or environment setup

Alternative Solutions:
  - Deploy API to Render.com (free, much easier than DirectAdmin)
  - Use Railway.app (free tier)
  - DigitalOcean App Platform ($5/month)

┌──────────────────────────────────────────────────────────────────────────────┐
│ TESTING LOCALLY (BEFORE DEPLOYING)                                          │
└──────────────────────────────────────────────────────────────────────────────┘

Windows:
  > start-server.bat
  
Mac/Linux:
  $ npm install
  $ npm start
  
Then visit:
  http://localhost:4000/api/health  → Should show {"status":"ok"}
  http://localhost:4000/admin       → Should show login page

If it works locally but not on server, the issue is server configuration.

╔══════════════════════════════════════════════════════════════════════════════╗
║                                                                              ║
║  BOTTOM LINE: Your DirectAdmin hosting needs to run a Node.js server.       ║
║               If it can't, deploy the API to Render.com instead.            ║
║                                                                              ║
╚══════════════════════════════════════════════════════════════════════════════╝
